
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Calculadora de Infusões - UTI</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="favicon.png" type="image/png" />
  <style>
    body { font-family: 'Segoe UI', sans-serif; margin: 0; background: #f8f9fa; }
    nav { display: flex; background: #0d6efd; }
    .tab {
      flex: 1; padding: 1em; cursor: pointer; color: white;
      background: #0d6efd; text-align: center; border: none; font-weight: bold;
    }
    .tab.active { background: #0b5ed7; }
    h2 { color: #0d6efd; text-align: center; }
    .warning {
      background: #fff3cd; color: #856404;
      padding: 1em; text-align: center; font-weight: bold;
    }
    .container {
      max-width: 900px;
      margin: auto;
      padding: 1em;
    }
    table {
      width: 100%; border-collapse: collapse;
      background: white; margin-top: 1em; box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }
    th, td {
      border: 1px solid #dee2e6;
      padding: 0.6em; text-align: center;
    }
    th { background: #e9ecef; }
    input, select {
      width: 100%; padding: 0.6em; margin-top: 0.5em; margin-bottom: 1em;
      border: 1px solid #ccc; border-radius: 5px;
    }
    #resposta { font-weight: bold; text-align: center; color: #0d6efd; }
  </style>
</head>
<body>
<div class="warning">
  ⚠️ Esses cálculos estão com base nas diluições já instituídas anteriormente por protocolo institucional UTI 30 leitos HMVG.
</div>

<nav>
  <button class="tab active" data-tab="diluicoes" onclick="showTab('diluicoes')">Diluições</button>
  <button class="tab" data-tab="tabela" onclick="showTab('tabela')">Tabela</button>
  <button class="tab" data-tab="conversor" onclick="showTab('conversor')">Conversor</button>
</nav>



<div id="diluicoes" class="container">
<h2 style="text-align:center;color:#0d6efd">Diluições</h2>
<h3 style='color:#0d6efd;margin-top:2em'>Analgésico</h3>
    <table><thead><tr>
      <th>Medicação</th><th>Apresentação</th><th>Diluição</th><th>Concentração</th>
    </tr></thead><tbody><tr><td>Fentanila</td><td>50 mcg/ml - 10 ml</td><td>2 amp (10 ml) + 80 ml SG 5% / SF 0.9% = 100 ml</td><td>10 mcg/ml</td></tr><tr><td>Morfina</td><td>10 mg/ml - 1 ml</td><td>1 amp (1 ml) + 99 ml SG 5% / SF 0.9% = 100 ml</td><td>100 mcg/ml</td></tr></tbody></table><h3 style='color:#0d6efd;margin-top:2em'>Bloqueador Neuromuscular</h3>
    <table><thead><tr>
      <th>Medicação</th><th>Apresentação</th><th>Diluição</th><th>Concentração</th>
    </tr></thead><tbody><tr><td>Rocurônio</td><td>50 mg/5 ml</td><td>2 amp (5 ml) + 90 ml SG 5% / SF 0.9% = 100 ml</td><td>1000 mcg/ml</td></tr></tbody></table><h3 style='color:#0d6efd;margin-top:2em'>Inotrópico</h3>
    <table><thead><tr>
      <th>Medicação</th><th>Apresentação</th><th>Diluição</th><th>Concentração</th>
    </tr></thead><tbody><tr><td>Dobutamina</td><td>12,5 mg/ml - 20 ml</td><td>2 amp (20 ml) + 60 ml SG 5% / SF 0.9% = 100 ml</td><td>5000 mcg/ml</td></tr></tbody></table><h3 style='color:#0d6efd;margin-top:2em'>Sedativo</h3>
    <table><thead><tr>
      <th>Medicação</th><th>Apresentação</th><th>Diluição</th><th>Concentração</th>
    </tr></thead><tbody><tr><td>Midazolam</td><td>5 mg/ml - 10 ml</td><td>2 amp (10 ml) + 80 ml SG 5% / SF 0.9% = 100 ml</td><td>1000 mcg/ml</td></tr><tr><td>Dexmedetomidina</td><td>100 mcg/ml - 2 ml</td><td>1 amp (2 ml) + 98 ml SG 5% / SF 0.9% = 100 ml</td><td>2 mcg/ml</td></tr><tr><td>Propofol</td><td>10 mg/ml - 20 ml</td><td>5 amp (20 ml) = 100 ml</td><td>10000 mcg/ml</td></tr></tbody></table><h3 style='color:#0d6efd;margin-top:2em'>Vasodilatador</h3>
    <table><thead><tr>
      <th>Medicação</th><th>Apresentação</th><th>Diluição</th><th>Concentração</th>
    </tr></thead><tbody><tr><td>Nitroglicerina</td><td>5 mg/ml - 10 ml</td><td>1 amp (10 ml) + 240 ml SG 5% / SF 0.9% = 250 ml</td><td>200 mcg/ml</td></tr><tr><td>Nitroprussiato</td><td>25 mg/ml - 2 ml</td><td>1 amp (2 ml) + 248 ml SG 5% = 250 ml</td><td>200 mcg/ml</td></tr></tbody></table><h3 style='color:#0d6efd;margin-top:2em'>Vasopressor</h3>
    <table><thead><tr>
      <th>Medicação</th><th>Apresentação</th><th>Diluição</th><th>Concentração</th>
    </tr></thead><tbody><tr><td>Norepinefrina</td><td>2 mg/ml - 4 ml</td><td>2 amp (4 ml) + 92 ml SG 5% / SF 0.9% = 100 ml</td><td>80 mcg/ml</td></tr><tr><td>Vasopressina</td><td>2 U/ml - 1 ml</td><td>1 amp (1 ml) + 99 ml SG 5% / SF 0.9% = 100 ml</td><td>0,2 UI/ml</td></tr></tbody></table></div>
<div id="tabela" class="container" style="display:none;">
  <h2>Tabela de Infusões</h2>
  <label for="peso">Peso do paciente (kg):</label>
  <input type="number" id="peso" value="70" />
  <div id="tabela-container"></div>
</div>




<div id="conversor" class="container" style="display:none;">
  <h2>Conversor ml/h → mcg/kg/min ou h</h2>
  <label for="peso2">Peso (kg):</label>
  <input type="number" id="peso2" value="70">
  <label for="med">Medicação:</label>
  <select id="med"></select>
  <label for="vel">Velocidade (ml/h):</label>
  <input type="number" id="vel" value="5">
  <p id="resposta"></p>
</div>


</html>



<script>
function showTab(tab) {
  document.getElementById("diluicoes").style.display = tab === 'diluicoes' ? 'block' : 'none';
  document.getElementById("tabela").style.display = tab === 'tabela' ? 'block' : 'none';
  document.getElementById("conversor").style.display = tab === 'conversor' ? 'block' : 'none';
  document.querySelectorAll(".tab").forEach(b => {
    b.classList.remove("active");
    if (b.dataset.tab === tab) b.classList.add("active");
  });
}

const dados = [
  {"Medicação":"Morfina","Categoria":"Analgésico","Unidade":"mcg/h","Concentração":100,"Dose Mín":100,"Dose Máx":3500,"VelMin":2.00,"VelMax":35.00},
  {"Medicação":"Fentanila","Categoria":"Analgésico","Unidade":"mcg/kg/h","Concentração":10,"Dose Mín":0.5,"Dose Máx":5},
  {"Medicação":"Dobutamina","Categoria":"Inotrópico","Unidade":"mcg/kg/min","Concentração":5000,"Dose Mín":5,"Dose Máx":20},
  {"Medicação":"Dexmedetomidina","Categoria":"Sedativo","Unidade":"mcg/kg/h","Concentração":2,"Dose Mín":0.2,"Dose Máx":0.7},
  {"Medicação":"Midazolam","Categoria":"Sedativo","Unidade":"mcg/kg/h","Concentração":1000,"Dose Mín":10,"Dose Máx":200},
  {"Medicação":"Propofol","Categoria":"Sedativo","Unidade":"mcg/kg/h","Concentração":10000,"Dose Mín":300,"Dose Máx":4000},
  {"Medicação":"Nitroglicerina","Categoria":"Vasodilatador","Unidade":"mcg/min","Concentração":200,"Dose Mín":1,"Dose Máx":200,"VelMin":0.30,"VelMax":60.00},
  {"Medicação":"Nitroprussiato","Categoria":"Vasodilatador","Unidade":"mcg/kg/min","Concentração":200,"Dose Mín":0.5,"Dose Máx":2},
  {"Medicação":"Norepinefrina","Categoria":"Vasopressor","Unidade":"mcg/kg/min","Concentração":80,"Dose Mín":0.1,"Dose Máx":2},
  {"Medicação":"Vasopressina","Categoria":"Vasopressor","Unidade":"UI/min","Concentração":0.2,"Dose Mín":0.01,"Dose Máx":0.04,"VelMin":3.00,"VelMax":12.00},
  {"Medicação":"Rocurônio","Categoria":"Bloqueador Neuromuscular","Unidade":"mcg/kg/h","Concentração":1000,"Dose Mín":300,"Dose Máx":600}
];

function gerarTabela(peso) {
  const container = document.getElementById("tabela-container");
  const agrupado = {};
  dados.forEach(m => {
    if (!agrupado[m.Categoria]) agrupado[m.Categoria] = [];
    agrupado[m.Categoria].push(m);
  });

  let html = "";
  Object.keys(agrupado).sort().forEach(cat => {
    html += `<h3 style='color:#0d6efd'>${cat}</h3>`;
    html += `<table><thead><tr>
      <th>Medicação</th><th>Unidade (Conc. mcg/ml ou UI/ml)</th><th>Dose (min–máx)</th><th>Velocidade (mL/h) min – máx</th>
    </tr></thead><tbody>`;
    agrupado[cat].forEach(m => {
      let unidadeConc = `${m.Unidade} (${m.Concentração})`;
      let doseRange = `${m["Dose Mín"]} – ${m["Dose Máx"]}`;
      let vm, vM;
      if (m.VelMin && m.VelMax) {
        vm = m.VelMin.toFixed(2);
        vM = m.VelMax.toFixed(2);
      } else if (m.Unidade.includes("min")) {
        vm = ((m["Dose Mín"] * peso * 60) / m.Concentração).toFixed(2);
        vM = ((m["Dose Máx"] * peso * 60) / m.Concentração).toFixed(2);
      } else {
        vm = ((m["Dose Mín"] * peso) / m.Concentração).toFixed(2);
        vM = ((m["Dose Máx"] * peso) / m.Concentração).toFixed(2);
      }
      html += `<tr><td>${m.Medicação}</td><td>${unidadeConc}</td><td>${doseRange}</td><td>${vm} – ${vM}</td></tr>`;
    });
    html += "</tbody></table>";
  });
  container.innerHTML = html;
}

document.getElementById("peso").addEventListener("input", e => gerarTabela(e.target.value));
gerarTabela(70);

// Conversor
const sel = document.getElementById("med");
const nomes = [...new Set(dados.map(d => d.Medicação))].filter(n => !["Morfina", "Vasopressina", "Nitroglicerina"].includes(n));
nomes.forEach(n => {
  const op = document.createElement("option");
  op.value = n;
  op.textContent = n;
  sel.appendChild(op);
});

function calcularDose() {
  const peso = parseFloat(document.getElementById("peso2").value);
  const vel = parseFloat(document.getElementById("vel").value);
  const med = dados.find(d => d.Medicação === document.getElementById("med").value);
  if (!peso || !vel || !med) return;
  const conc = med.Concentração;
  const unidade = med.Unidade;
  const doseTotal = vel * conc;
  let resultado = "";
  if (unidade.includes("min")) {
    resultado = (doseTotal / peso / 60).toFixed(2) + " mcg/kg/min";
  } else if (unidade.includes("h")) {
    resultado = (doseTotal / peso).toFixed(2) + " mcg/kg/h";
  } else {
    resultado = doseTotal.toFixed(2) + " " + unidade;
  }
  document.getElementById("resposta").innerText = `Dose equivalente: ${resultado}`;
}

document.getElementById("peso2").addEventListener("input", calcularDose);
document.getElementById("vel").addEventListener("input", calcularDose);
document.getElementById("med").addEventListener("change", calcularDose);
showTab('diluicoes');
</script>

<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('service-worker.js')
    .then(reg => console.log("SW registrado", reg))
    .catch(err => console.error("Erro SW", err));
}
</script>
</body>
</html>
