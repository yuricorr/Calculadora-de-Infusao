
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="favicon.png" type="image/png">
    <title>Calculadora de Infusões</title>
    <meta name="theme-color" content="#1976d2">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="icon-192.png">
    </div>
<div id="conversor" style="display:none;">
  <h2>Conversão de ml/h para mcg/kg/min ou h</h2>
  <label for="peso2">Peso (kg):</label>
  <input type="number" id="peso2" value="70"><br>
  <label for="med">Medicação:</label>
  <select id="med"></select><br>
  <label for="vel">Velocidade (ml/h):</label>
  <input type="number" id="vel" value="5"><br>
  <p id="resposta"></p>
  <script>
    const dadosConv = dados;
    const sel = document.getElementById("med");
    dadosConv.forEach(d => {
      const op = document.createElement("option");
      op.value = d.Medicação;
      op.textContent = d.Medicação;
      sel.appendChild(op);
    });

    function calcularDose() {
      const peso = parseFloat(document.getElementById("peso2").value);
      const vel = parseFloat(document.getElementById("vel").value);
      const med = dadosConv.find(d => d.Medicação === document.getElementById("med").value);
      if (!peso || !vel || !med) return;

      const conc = med.Concentração;
      const unidade = med.Unidade;
      const doseTotal = vel * conc;

      let resultado = "";
      if (unidade.includes("min")) {
        resultado = (doseTotal / peso / 60).toFixed(2) + " mcg/kg/min";
      } else if (unidade.includes("h")) {
        resultado = (doseTotal / peso).toFixed(2) + " mcg/kg/h";
      } else {
        resultado = doseTotal.toFixed(2) + " " + unidade;
      }
      document.getElementById("resposta").innerText = `Dose equivalente: ${resultado}`;
    }

    document.getElementById("peso2").addEventListener("input", calcularDose);
    document.getElementById("vel").addEventListener("input", calcularDose);
    document.getElementById("med").addEventListener("change", calcularDose);
  </script>
</div>
<script>
  function showTab(tab) {
    document.getElementById("tabela").style.display = tab === 'tabela' ? 'block' : 'none';
    document.getElementById("conversor").style.display = tab === 'conversor' ? 'block' : 'none';
  }
</script>
<script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
          navigator.serviceWorker.register('service-worker.js')
            .then(() => console.log("SW registrado"))
            .catch(err => console.error("SW erro:", err));
        });
      }
    </script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background-color: #f5f5f5; }
        h1 { text-align: center; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 10px; border: 1px solid #ccc; text-align: center; }
        input[type="number"] { padding: 5px; font-size: 16px; width: 100px; }
        .header { background-color: #e0e0e0; }
        .alert {
            background-color: #fff3cd;
            color: #856404;
            padding: 10px;
            border: 1px solid #ffeeba;
            margin-bottom: 20px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
<nav>
  <button onclick="showTab('tabela')">Tabela</button>
  <button onclick="showTab('conversor')">Conversor</button>
</nav>
<div id="tabela" style="display:block;">

<h1>Calculadora de Infusões - UTI</h1>

<div class="alert">
  <strong>Advertência:</strong> Estes cálculos estão baseados nas <strong>diluições padronizadas</strong> previamente instituídas por <strong>protocolo institucional</strong>. Esta ferramenta é destinada a profissionais da saúde treinados.
</div>

<label for="peso">Peso do paciente (kg): </label>
<input type="number" id="peso" value="70" onchange="calcularVelocidades()">

<table>
    <thead>
        <tr class="header">
            <th>Medicação</th>
            <th>Categoria</th>
            <th>Unidade</th>
            <th>Concentração (mcg/ml)</th>
            <th>Dose Mín</th>
            <th>Dose Máx</th>
            <th>Velocidade Mín (mL/h)</th>
            <th>Velocidade Máx (mL/h)</th>
        </tr>
    </thead>
    <tbody id="tabela-infusoes"></tbody>
</table>

</div>
<div id="conversor" style="display:none;">
  <h2>Conversão de ml/h para mcg/kg/min ou h</h2>
  <label for="peso2">Peso (kg):</label>
  <input type="number" id="peso2" value="70"><br>
  <label for="med">Medicação:</label>
  <select id="med"></select><br>
  <label for="vel">Velocidade (ml/h):</label>
  <input type="number" id="vel" value="5"><br>
  <p id="resposta"></p>
  <script>
    const dadosConv = dados;
    const sel = document.getElementById("med");
    dadosConv.forEach(d => {
      const op = document.createElement("option");
      op.value = d.Medicação;
      op.textContent = d.Medicação;
      sel.appendChild(op);
    });

    function calcularDose() {
      const peso = parseFloat(document.getElementById("peso2").value);
      const vel = parseFloat(document.getElementById("vel").value);
      const med = dadosConv.find(d => d.Medicação === document.getElementById("med").value);
      if (!peso || !vel || !med) return;

      const conc = med.Concentração;
      const unidade = med.Unidade;
      const doseTotal = vel * conc;

      let resultado = "";
      if (unidade.includes("min")) {
        resultado = (doseTotal / peso / 60).toFixed(2) + " mcg/kg/min";
      } else if (unidade.includes("h")) {
        resultado = (doseTotal / peso).toFixed(2) + " mcg/kg/h";
      } else {
        resultado = doseTotal.toFixed(2) + " " + unidade;
      }
      document.getElementById("resposta").innerText = `Dose equivalente: ${resultado}`;
    }

    document.getElementById("peso2").addEventListener("input", calcularDose);
    document.getElementById("vel").addEventListener("input", calcularDose);
    document.getElementById("med").addEventListener("change", calcularDose);
  </script>
</div>
<script>
  function showTab(tab) {
    document.getElementById("tabela").style.display = tab === 'tabela' ? 'block' : 'none';
    document.getElementById("conversor").style.display = tab === 'conversor' ? 'block' : 'none';
  }
</script>
<script>
    const dados = [
  {
    "Medicação": "Fentanila",
    "Unidade": "mcg/kg/h",
    "Dose Mínima": 0.5,
    "Dose Máxima": 5.0,
    "Concentração": 10.0,
    "Categoria": "Analgésico"
  },
  {
    "Medicação": "Morfina",
    "Unidade": "mcg/h",
    "Dose Mínima": 100.0,
    "Dose Máxima": 3500.0,
    "Concentração": 100.0,
    "Categoria": "Analgésico"
  },
  {
    "Medicação": "Rocurônio",
    "Unidade": "mcg/kg/h",
    "Dose Mínima": 300.0,
    "Dose Máxima": 600.0,
    "Concentração": 1000.0,
    "Categoria": "Bloqueador Neuromuscular"
  },
  {
    "Medicação": "Dobutamina",
    "Unidade": "mcg/kg/min",
    "Dose Mínima": 5.0,
    "Dose Máxima": 20.0,
    "Concentração": 5000.0,
    "Categoria": "Inotrópico"
  },
  {
    "Medicação": "Dexmedetomidina",
    "Unidade": "mcg/kg/h",
    "Dose Mínima": 0.2,
    "Dose Máxima": 0.7,
    "Concentração": 2.0,
    "Categoria": "Sedativo"
  },
  {
    "Medicação": "Midazolam",
    "Unidade": "mcg/kg/h",
    "Dose Mínima": 10.0,
    "Dose Máxima": 200.0,
    "Concentração": 1000.0,
    "Categoria": "Sedativo"
  },
  {
    "Medicação": "Propofol",
    "Unidade": "mcg/kg/h",
    "Dose Mínima": 300.0,
    "Dose Máxima": 4000.0,
    "Concentração": 10000.0,
    "Categoria": "Sedativo"
  },
  {
    "Medicação": "Nitroglicerina",
    "Unidade": "mcg/min",
    "Dose Mínima": 1.0,
    "Dose Máxima": 200.0,
    "Concentração": 200.0,
    "Categoria": "Vasodilatador"
  },
  {
    "Medicação": "Nitroprussiato",
    "Unidade": "mcg/kg/min",
    "Dose Mínima": 0.5,
    "Dose Máxima": 2.0,
    "Concentração": 200.0,
    "Categoria": "Vasodilatador"
  },
  {
    "Medicação": "Norepinefrina",
    "Unidade": "mcg/kg/min",
    "Dose Mínima": 0.1,
    "Dose Máxima": 2.0,
    "Concentração": 80.0,
    "Categoria": "Vasopressor"
  },
  {
    "Medicação": "Vasopressina",
    "Unidade": "UI/min",
    "Dose Mínima": 0.01,
    "Dose Máxima": 0.04,
    "Concentração": 0.2,
    "Categoria": "Vasopressor"
  }
];

    function calcularVelocidades() {
        const peso = parseFloat(document.getElementById("peso").value);
        const corpoTabela = document.getElementById("tabela-infusoes");
        corpoTabela.innerHTML = "";

        dados.forEach(d => {
            let velMin = "", velMax = "";
            if (d.Medicação === "Morfina") {
                velMin = "2.00";
                velMax = "35.00";
            } else if (d.Unidade === "mcg/kg/min") {
                velMin = ((d["Dose Mínima"] * peso * 60) / d.Concentração).toFixed(2);
                velMax = ((d["Dose Máxima"] * peso * 60) / d.Concentração).toFixed(2);
            } else if (d.Unidade === "mcg/kg/h") {
                velMin = ((d["Dose Mínima"] * peso) / d.Concentração).toFixed(2);
                velMax = ((d["Dose Máxima"] * peso) / d.Concentração).toFixed(2);
            } else if (d.Unidade === "mcg/min") {
                velMin = ((d["Dose Mínima"] * 60) / d.Concentração).toFixed(2);
                velMax = ((d["Dose Máxima"] * 60) / d.Concentração).toFixed(2);
            } else if (d.Unidade === "mcg/h") {
                velMin = (d["Dose Mínima"] / d.Concentração).toFixed(2);
                velMax = (d["Dose Máxima"] / d.Concentração).toFixed(2);
            } else if (d.Unidade === "UI/min") {
                velMin = ((d["Dose Mínima"] * 60) / d.Concentração).toFixed(2);
                velMax = ((d["Dose Máxima"] * 60) / d.Concentração).toFixed(2);
            }
            corpoTabela.innerHTML += `
                <tr>
                    <td>${d.Medicação}</td>
                    <td>${d.Categoria}</td>
                    <td>${d.Unidade}</td>
                    <td>${d.Concentração}</td>
                    <td>${d["Dose Mínima"]}</td>
                    <td>${d["Dose Máxima"]}</td>
                    <td>${velMin}</td>
                    <td>${velMax}</td>
                </tr>`;
        });
    }

    calcularVelocidades();
</script>

</body>
</html>
